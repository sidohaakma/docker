app:
  image: registry.haakma.org/molgenis:4.1.0
  ports:
    - 8081:8080
  links:
    - db
  volumes:
    - app-data:/opt/molgenis
  labels:
    io.rancher.scheduler.global: 'true'
    io.rancher.container.create_agent: 'true'
    io.rancher.container.agent.role: environmentAdmin
  db:
    image: postgres:9.6-alpine
    environment:
      - POSTGRES_USER=molgenis
      - POSTGRES_PASSWORD=molgenis
      - POSTGRES_DB=molgenis
    expose:
      - 5432
    volumes:
      - db-data:/var/lib/postgresql/data
    labels:
      io.rancher.container.create_agent: 'true'
volumes:
    db-data:
    app-data:
